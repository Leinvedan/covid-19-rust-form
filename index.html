<!DOCTYPE html>
<html>
  <head>
    <!-- Dados de SEO, preencher quando já tiver tudo confirmado -->
    <title>Formulário COVID-19</title>
    <meta name="description" content="Formulário para ajudar na construção do mapa COVID-19">
    <meta name="keywords" content="COVID-19,formulário"> 
    <link rel="canonical" href="http://127.0.0.1:5500/index.html" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src='https://www.google.com/recaptcha/api.js' async defer></script>
  </head>
  <body>
    <form id="covid-form">
        <div id="area-localizacao">
            <label for="cep">CEP</label>
            <input id="cep" type="text" placeholder="01001000" required /><br>

            <label for="logradouro">Logradouro</label>
            <input id="logradouro" type="text" required /><br>

            <label for="numero">Número</label>
            <input id="numero" type="text" /><br>

            <label for="complemento">Complemento</label>
            <input id="complemento" type="text" /><br>

            <label for="bairro">Bairro</label>
            <input id="bairro" type="text" required /><br>

            <label for="cidade">Cidade</label>
            <input id="cidade" type="text" required /><br>

            <label for="uf">Estado</label>
            <select id="uf">
                <option value="AC">Acre</option>
                <option value="AL">Alagoas</option>
                <option value="AP">Amapá</option>
                <option value="AM">Amazonas</option>
                <option value="BA">Bahia</option>
                <option value="CE">Ceará</option>
                <option value="DF">Distrito Federal</option>
                <option value="ES">Espírito Santo</option>
                <option value="GO">Goiás</option>
                <option value="MA">Maranhão</option>
                <option value="MT">Mato Grosso</option>
                <option value="MS">Mato Grosso do Sul</option>
                <option value="MG">Minas Gerais</option>
                <option value="PA">Pará</option>
                <option value="PB">Paraíba</option>
                <option value="PR">Paraná</option>
                <option value="PE">Pernambuco</option>
                <option value="PI">Piauí</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="RN">Rio Grande do Norte</option>
                <option value="RS">Rio Grande do Sul</option>
                <option value="RO">Rondônia</option>
                <option value="RR">Roraima</option>
                <option value="SC">Santa Catarina</option>
                <option value="SP">São Paulo</option>
                <option value="SE">Sergipe</option>
                <option value="TO">Tocantins</option>
            </select>
        </div>
        <!-- Sintomas -->
        <div id="area-sintomas-1">

            <label for="Residentes"> Número de residentes: </label><br>
            <input type="number" id="Residentes" name="Residentes" value=""><br>

            <input type="checkbox" id="sintoma1" name="sintoma1" value="febre">
            <label for="sintoma1"> Febre </label><br>

            <input type="checkbox" id="sintoma2" name="sintoma2" value="Coriza">
            <label for="sintoma2"> Coriza </label><br>

            <input type="checkbox" id="sintoma3" name="sintoma3" value="Coriza">
            <label for="sintoma3"> Tosse </label><br>

            <input type="checkbox" id="sintoma4" name="sintoma4" value="Coriza">
            <label for="sintoma4"> Diarréia </label><br>

            <input type="checkbox" id="sintoma5" name="sintoma5" value="Coriza">
            <label for="sintoma5"> Nausea e vômito </label><br>

            <input type="checkbox" id="sintoma6" name="sintoma6" value="Coriza">
            <label for="sintoma6"> Calafrios </label><br>

            <input type="checkbox" id="sintoma7" name="sintoma7" value="Coriza">
            <label for="sintoma7"> Tremores </label><br>
        </div>

        <div id="area-sintomas-2">
            <input type="checkbox" id="sintoma8" name="sintoma8" value="Coriza">
            <label for="sintoma8"> Dores no corpo </label><br>

            <input type="checkbox" id="sintoma9" name="sintoma9" value="Coriza">
            <label for="sintoma9"> Dor de cabeça </label><br>

            <input type="checkbox" id="sintoma10" name="sintoma10" value="Coriza">
            <label for="sintoma10"> Cansaço </label><br>

            <input type="checkbox" id="sintoma11" name="sintoma11" value="Coriza">
            <label for="sintoma11"> Perda de olfato </label><br>

            <input type="checkbox" id="sintoma12" name="sintoma12" value="Coriza">
            <label for="sintoma12"> Perda de paladar </label><br>

            <input type="checkbox" id="sintoma13" name="sintoma13" value="Coriza">
            <label for="sintoma13"> Dor de garganta </label><br>

            <input type="checkbox" id="sintoma14" name="sintoma14" value="Coriza">
            <label for="sintoma14"> Dificuldade de respirar </label><br>
        </div>

        <!-- Diagnostico -->
        <div id="area-diagnostico">
            <p> O diganóstico de que houve COVID nessa residência: </p><br>

            <input type="radio" id="diagnostico1" name="diagnostico" value="teste">
            <label for="diagnostico1"> Teste </label><br>

            <input type="radio" id="diagnostico2" name="diagnostico" value="clinico">
            <label for="diagnostico2"> Clínico, realizado por um médico </label><br>

            <input type="radio" id="diagnostico3" name="diagnostico" value="autodiagnostico">
            <label for="diagnostico3"> Autodiagnóstico </label><br>


            <div class="g-recaptcha" data-sitekey="(your-site-key)"></div>
            <input type="button" onclick="checkRecaptcha();" value="submit"></input>
        </div>

    </form>

    <script type="text/javascript"> 
    function checkRecaptcha() {
      var response = grecaptcha.getResponse();
      if(response.length == 0) { 
        //reCaptcha not verified
        alert("no pass"); 
      }
      else { 
        //reCaptch verified
        alert("pass"); 
      }
    }
    </script>

    <script type="text/javascript">
    const cepElement = document.getElementById("cep");
    cepElement.addEventListener("focusout", function () {
      fetch(`https://viacep.com.br/ws/${cepElement.value}/json/unicode/`, { method: 'GET', mode: 'cors' })
        .then( (response) => {
            if (response.status === 400) {
              console.alert('CEP inválido');
              return;
            }
            else if (response.status !== 200) {
              console.alert('Algo deu errado ao buscar o CEP, por favor tente novamente');
              return;
            }
            return response.json();
        })
        .then((cepData) => {
          console.log(cepData);
          document.getElementById("logradouro").value = cepData.logradouro;
          document.getElementById("complemento").value = cepData.complemento;
          document.getElementById("bairro").value = cepData.bairro;
          document.getElementById("cidade").value = cepData.localidade;
          document.getElementById("uf").value = cepData.uf;
          document.getElementById("numero").focus();
        });
    });
    </script>

  </body>
</html>